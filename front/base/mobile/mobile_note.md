# mobile

## 适配

```text

在dpr不同的屏幕上，css像素所呈现的大小是一致的。
不同的是，1个css像素对应（覆盖）的物理像素个数。----------- 模糊的产生
    dpr=1的屏幕    1个css像素对应（覆盖）的1个物理像素。
    dpr=2的屏幕    1个css像素对应（覆盖）的4个物理像素。

模糊的本质是因为dpr
=======================================
dpr = 2 : 1
   PC          device      css
   4             4          1
100*100       100*100      50*50        正常2:1
100*100       100*100      100*100      偏淡1:1
100*100       100*100      25*25        偏浓4:1
=======================================

位图像素是栅格图像（如：png,jpg,gif等）最小的数据单元。每一个位图像素都包含着一些自身的显示信息。（如：显示位置，颜色值，透明度等）

理论上来说，1个位图像素对应1个物理像素，图片才能达到完美清晰的展示。
以iphone6为例，1个位图像素对应4个物理像素。
由于单个位图像素已经是最小的数据单位了，它不能再被进行切割。
于是为了能够显示出来，就只能就近取色，位图像素不够分从而导致所谓的图片模糊问题
解决方法:
    使用跟dpr同个倍数大小的图片。比如iphone6，一个200x300的img标签，原图就要提供400x600的大小。
    那么当加载到img标签中，浏览器会自动对每1px的css像素减半，可以理解为此时还是维持着1:1的css像素:物理像素，不产生模糊。
    css像素:物理像素
       1  :   4

响应式针对的是不同分辨率设备而进行的适配式设计，以利用@media规则为主要手段，
自适应则忽略@media以比例布局为主，目的是适应不同的浏览器窗口大小。



于是我们会发现，现今大型网站，例如说淘宝网，已经没有做响应式了。什么意思呢？
我们会发现，淘宝网手机端和网页端使用的是两个域名，也就是说，不同的客户端已经不再共用一套dom结构了。
而是区分开来做自适应。然后每次用户访问的时候它就根据客户端的类型重定向。

为什么呢？

试想一下淘宝这种大型网站，一个分页下的商品条目特别多，并且每个商品条目的dom结构又十分复杂，而且pc端往往显示的信息是要比手机端更多的。
如果不分开做两套，而是直接用响应式的话，那么pc端上显示的很多dom就要在手机端上隐藏，结果这些dom都没有被用到，但是却加载了。
在这个流量和速度至上的时代，代码冗余先不说，多加载的这些无用的代码而消耗的流量，从某种意义上来说就已经损失了很多的效益。

```

## 术语

```text
CSS像素（CSS Pixel）：
    适用于web编程，指的是我们在样式代码中使用到的逻辑像素，是一个抽象概念，实际并不存在

设备像素（Device Pixel）：
    物理像素，设备能控制显示的最小单位，我们常说的1920×1080像素分辨率就是用的设备像素单位
    
设备独立像素（Device Independent Pixel）：
    与设备无关的逻辑像素，代表可以通过程序控制使用的虚拟像素，是一个总体概念，包括了CSS像素
    设备独立像素(也叫密度无关像素)，可以认为是计算机坐标系统中得一个点，这个点代表一个可以由程序使用的虚拟像素(比如: css像素)，然后由相关系统转换为物理像素。
    所以说，物理像素和设备独立像素之间存在着一定的对应关系，这就是接下来要说的设备像素比。


设备像素比 = 物理像素 / 设备独立像素 // 在某一方向上，x方向或者y方向


js获取到当前设备的dpr:window.devicePixelRatio

css进行媒体查询
        -webkit-device-pixel-ratio，
        -webkit-min-device-pixel-ratio和
        -webkit-max-device-pixel-ratio，
        对不同dpr的设备，做一些样式适配(这里只针对webkit内核的浏览器和webview)。





```

## 一像素问题

```text

CSS像素（CSS Pixel）：
    适用于web编程，指的是我们在样式代码中使用到的逻辑像素，是一个抽象概念，实际并不存在
设备独立像素（Device Independent Pixel）：
    与设备无关的逻辑像素，代表可以通过程序控制使用的虚拟像素，是一个总体概念，包括了CSS像素
设备像素（Device Pixel）：
    物理像素，设备能控制显示的最小单位，我们常说的1920×1080像素分辨率就是用的设备像素单位






问题：一般在移动端，由于dpr（设备像素比）不为1，在PC端显示1像素的边框，在移动端其实显示为2px。
解决这个问题，主要思想是：使用伪元素设置1px的边框，然后使用媒体查询，根据dpr的大小，对边框进行缩放（scaleY）。




因为设备独立像素是包含了CSS像素的大类，所以我们可以直接讨论设备独立像素和设备像素之前的区别和联系。
首先我们可以做一个总体总结：
PC端 —— 1个设备独立像素 = 1个设备像素 （在100%，未缩放的情况下，如果缩放到200%可以说1个设备独立像素 = 2个设备像素）
移动端 —— 根据设备不同有很大的差异，根据 ppi 不同我们可以得到不同的换算关系，标准屏幕（160ppi）下 1个设备独立像素 = 1个设备像素



在详细阐述之前我们先介绍两个概念：每英寸像素点ppi 和 设备像素比dpr
ppi （pixel per inch）：表示每英寸所包含的像素点数目，数值越高，说明屏幕能以更高密度显示图像
计算公式——

```